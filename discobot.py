# -*- coding: utf8 -*-!
import discord
from discord.ext import commands
import asyncio
import random
import time as tm
from DB import endgame, save_set, load_set, get_settings, change_settings


client = commands.Bot(command_prefix="!")
client.remove_command("help")

roles_num_b = {'1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0}
tumb = 0
mafia_vote = []
voted = []
gamers = {}
votes = []
already = []
guilty = {}
checker = 0
vn = -1
killed = []
vote_choice = ''
right = None
roles_num = {}
player_roles = {}
player_status = {}
roles_multiplier = [1.4, 1.5, 1.75, 1.75, 1.6, 2, 1.4, 1, 1.8, 1.2, 1.6, 1.5]
sequence = [10, 7, [2, 9, 12], 3, [4, 11], 6, 5]
right_to_chat = []
right_to_act = []
sequence_guild_message = ['–í–æ—Ä–∞ üîê', '–ö—É—Ä—Ç–∏–∑–∞–Ω–∫–∏ üíã', '–ú–∞—Ñ–∏–∏ üïµÔ∏è', '–î–æ–Ω–∞ –º–∞—Ñ–∏–∏ ü•É', '–ö–æ–º–∏—Å—Å–∞—Ä–∞ üöî', '–ú–∞–Ω—å—è–∫–∞ üî™', '–î–æ–∫—Ç–æ—Ä–∞ üíâ']
mafia = []
police = []
roles_definition = {1: '–ú–∏—Ä–Ω—ã–π –∂–∏—Ç–µ–ª—å', 2: '–ú–∞—Ñ–∏—è', 3: '–î–æ–Ω', 4: '–ö–æ–º–∏—Å—Å–∞—Ä', 5: '–î–æ–∫—Ç–æ—Ä', 6: '–ú–∞–Ω—å—è–∫', 7: '–ö—É—Ä—Ç–∏–∑–∞–Ω–∫–∞', 8: '–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π', 9: '–î–≤—É–ª–∏–∫–∏–π', 10: '–í–æ—Ä', 11: '–°–µ—Ä–∂–∞–Ω—Ç', 12: '–û–±–æ—Ä–æ—Ç–µ–Ω—å'}
roles_description = {'1': ['–í–∞—à–∞ —Ä–æ–ª—å - –ú–∏—Ä–Ω—ã–π –∂–∏—Ç–µ–ª—å.', '–í–∞—à–∞ –∑–∞–¥–∞—á–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –º–∞—Ñ–∏–∏ –∏ –ø–æ—Å–∞–¥–∏—Ç—å –≤ —Ç—é—Ä—å–º—É. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–Ω–µ–≤–Ω–æ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏.', 'https://w-dog.pw/android-wallpapers/4/15/455401079884056/colton-haynes-guy-men-black-machine-black-and-white.jpg'],
                     '2': ['–í–∞—à–∞ —Ä–æ–ª—å - –ú–∞—Ñ–∏—è.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ —á–µ—Ä–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –∫—Ä–∞—Å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –≥–æ—Ä–æ–¥–µ. –ù–æ—á—å—é –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è–º–∏ –º–∞—Ñ–∏–∏. –ú–∞—Ñ–∏—è —É–±–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∑–∞ –Ω–æ—á—å, –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—â–∏–º —Ä–µ—à–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è, —Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –î–æ–Ω–æ–º –º–∞—Ñ–∏–∏. –ü—Ä–∏ —Å–º–µ—Ä—Ç–∏ –î–æ–Ω–∞, —É–±–∏–≤–∞–µ—Ç—Å—è —Ü–µ–ª—å, –∑–∞ –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–æ –±–æ–ª—å—à–µ–µ –∫–æ–ª-–≤–æ –∏–≥—Ä–æ–∫–æ–≤.', 'https://media.discordapp.net/attachments/713363794138628176/713742967390601277/8011f830f532082c.jpg?width=782&height=519'],
                     '3': ['–í–∞—à–∞ —Ä–æ–ª—å - –î–æ–Ω –º–∞—Ñ–∏–∏.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ —á–µ—Ä–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –∫—Ä–∞—Å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –≥–æ—Ä–æ–¥–µ –∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –∫–æ–º–∏—Å—Å–∞—Ä–∞, –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ. –ù–æ—á—å—é –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –¥–≤–∞–∂–¥—ã, —Å–Ω–∞—á–∞–ª–∞ –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è–º–∏ –º–∞—Ñ–∏–∏, –∑–∞—Ç–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ. –ú–∞—Ñ–∏—è —É–±–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∑–∞ –Ω–æ—á—å, –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—â–∏–º —Ä–µ—à–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è, —Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –≤–∞–º–∏. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å–Ω–µ—Ç–µ—Å—å –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –Ω–∞ –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –µ—Å–ª–∏ —ç—Ç–æ—Ç –∏–≥—Ä–æ–∫ - –∫–æ–º–∏—Å—Å–∞—Ä, —Ç–æ –≤–µ–¥—É—â–∏–π –¥–∞—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–π –∑–Ω–∞–∫.', 'https://media.discordapp.net/attachments/713363794138628176/713742944728907786/f1c3da335e7e8b0f.jpg?width=519&height=519'],
                     '4': ['–í–∞—à–∞ —Ä–æ–ª—å - –ö–æ–º–∏—Å—Å–∞—Ä.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ –∫—Ä–∞—Å–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –∏—Å–∫–∞—Ç—å –º–∞—Ñ–∏–æ–∑–∏ –Ω–æ—á—å—é. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –µ—Å–ª–∏ —ç—Ç–æ —á–µ—Ä–Ω—ã–π –∏–≥—Ä–æ–∫, –≤–µ–¥—É—â–∏–π –¥–∞—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–π –æ—Ç–≤–µ—Ç. –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –º–∞–Ω—å—è–∫–∞, –≤–µ–¥—É—â–∏–π —Å–∫–∞–∂–µ—Ç, —á—Ç–æ –æ–Ω –∏–≥—Ä–∞–µ—Ç –∑–∞ –º–∏—Ä–Ω—ã—Ö. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã —Ç–æ–ª—å–∫–æ –≤–∞–º, –Ω–æ –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –æ–≥–ª–∞—Å–∏—Ç—å –∏—Ö –¥–Ω–µ–º –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –ü—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–µ—Ä–∂–∞–Ω—Ç–æ–º, –µ—Å–ª–∏ —Ç–∞–∫–æ–≤–æ–π –µ—Å—Ç—å.', 'https://media.discordapp.net/attachments/713363794138628176/713742946112897034/357cb0fc4c2d221d.jpg?width=514&height=519'],
                     '5': ['–í–∞—à–∞ —Ä–æ–ª—å - –î–æ–∫—Ç–æ—Ä.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ –∫—Ä–∞—Å–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - —Å–ø–∞—Å–∞—Ç—å –æ—Ç –ø–æ–∫—É—à–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –Ω–æ—á—å—é, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞(–≤–∫–ª—é—á–∞—è —Å–µ–±—è), –µ—Å–ª–∏ –µ–≥–æ –ø—ã—Ç–∞–ª–∏—Å—å —É–±–∏—Ç—å —ç—Ç–æ–π –Ω–æ—á—å—é, —Ç–æ –æ–Ω –≤—ã–∂–∏–≤–∞–µ—Ç, –±–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞–º. –ù–µ–ª—å–∑—è –ª–µ—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∏–≥—Ä–æ–∫–∞ –¥–≤–µ –Ω–æ—á–∏ –ø–æ–¥—Ä—è–¥.', 'https://media.discordapp.net/attachments/713363794138628176/713742942719836250/e5b40f920b837dfb.jpg?width=519&height=519'],
                     '6': ['–í–∞—à–∞ —Ä–æ–ª—å - –ú–∞–Ω—å—è–∫.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ —Å–∞–º–∏ –∑–∞ —Å–µ–±—è. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –æ—Å—Ç–∞—Ç—å—Å—è –æ–¥–Ω–æ–º—É –≤ –∏–≥—Ä–µ. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –Ω–æ—á—å—é, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö–æ—Ç–∏—Ç–µ —É–±–∏—Ç—å. –ï—Å–ª–∏ –≤–∞—Å –ø—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–º–∏—Å—Å–∞—Ä, —Ç–æ –æ–Ω –ø–æ–ª—É—á–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –≤—ã –º–∏—Ä–Ω—ã–π.', 'https://media.discordapp.net/attachments/713363794138628176/713742948600119296/14b400af131ac30e.jpg?width=519&height=519'],
                     '7': ['–í–∞—à–∞ —Ä–æ–ª—å - –ö—É—Ä—Ç–∏–∑–∞–Ω–∫–∞.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ –∫—Ä–∞—Å–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - —Å–ø–∞—Å–∞—Ç—å –∫—Ä–∞—Å–Ω—ã—Ö. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –Ω–æ—á—å—é, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞. –í—ã–±—Ä–∞–Ω–Ω—ã–π –∏–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–±–∏—Ç –≤ —ç—Ç—É –Ω–æ—á—å, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Ç–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤ —ç—Ç—É –Ω–æ—á—å, –µ—Å–ª–∏ –æ–Ω–∞ —É –Ω–µ–≥–æ –µ—Å—Ç—å. –ù–µ–ª—å–∑—è –≤—ã–±–∏—Ä–∞—Ç—å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∏–≥—Ä–æ–∫–∞ –¥–≤–µ –Ω–æ—á–∏ –ø–æ–¥—Ä—è–¥. –ü–æ–≥–∏–±–∞–µ—Ç, –µ—Å–ª–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–æ—á–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º –ú–∞–Ω—å—è–∫–∞. –ï—Å–ª–∏ –º–∞—Ñ–∏–æ–∑–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∏ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –µ–≥–æ, —Ç–æ –º–∞—Ñ–∏–æ–∑–∏ –Ω–µ —É–±–∏–≤–∞—é—Ç —ç—Ç–æ–π –Ω–æ—á—å—é.', 'https://media.discordapp.net/attachments/713363794138628176/713742947987882094/e70bf7c63c141dda.jpg?width=830&height=519'],
                     '8': ['–í–∞—à–∞ —Ä–æ–ª—å - –ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ –∫—Ä–∞—Å–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –ø—Ä–∏–Ω–∏–º–∞—Ç—å —É–¥–∞—Ä —á–µ—Ä–Ω—ã—Ö –Ω–∞ —Å–µ–±—è. –ù–æ—á—å—é –≤–∞—Å –Ω–µ –º–æ–≥—É—Ç —É–±–∏—Ç—å. –ï–¥–∏–Ω—Å—Ç–µ–≤–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã - —ç—Ç–æ –¥–Ω–µ–≤–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–µ—à–∞—Ç –ø–æ—Å–∞–¥–∏—Ç—å –≤–∞—Å.', 'https://media.discordapp.net/attachments/713363794138628176/713743623614758942/5f9244fb10cf04ea280eb6b192b9df7a--baron-samedi-skull-art.png?width=357&height=519'],
                     '9': ['–í–∞—à–∞ —Ä–æ–ª—å - –î–≤—É–ª–∏–∫–∏–π.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ —á–µ—Ä–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –Ω–∞–π—Ç–∏ –º–∞—Ñ–∏—é, –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –Ω–æ—á—å—é, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞. –ï—Å–ª–∏ —ç—Ç–æ—Ç –∏–≥—Ä–æ–∫ - –º–∞—Ñ–∏—è, —Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–æ –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –º–∞—Ñ–∏–µ–π –Ω–æ—á—å—é –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–±–∏–≤–∞—Ç—å –æ–¥–Ω—É —Ü–µ–ª—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –º–∞—Ñ–∏–∏. –ï—Å–ª–∏ –≤—Å–µ—Ö –º–∞—Ñ–∏–æ–∑–∏ –ø–æ—Å–∞–¥—è—Ç –∏–ª–∏ —É–±—å—é—Ç, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –∏—Ö –Ω–∞–π–¥–µ—Ç–µ, —Ç–æ –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–µ—Ç–µ.', 'https://media.discordapp.net/attachments/713363794138628176/713742942061461504/f5012122151c499d.jpg?width=872&height=472'],
                     '10': ['–í–∞—à–∞ —Ä–æ–ª—å - –í–æ—Ä.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ —á–µ—Ä–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –ª–∏—à–∞—Ç—å —Ö–æ–¥–∞ –≤–∞–∂–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –∫—Ä–∞—Å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã. –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –Ω–æ—á—å—é, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞. –í—ã–±—Ä–∞–Ω–Ω—ã–π –∏–≥—Ä–æ–∫ —Ç–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤ —ç—Ç—É –Ω–æ—á—å, –µ—Å–ª–∏ –æ–Ω–∞ —É –Ω–µ–≥–æ –µ—Å—Ç—å.', 'https://reporter64.ru/uploads/content/ala_15808010345e391c0ad5f1b.jpg'],
                     '11': ['–í–∞—à–∞ —Ä–æ–ª—å - –°–µ—Ä–∂–∞–Ω—Ç.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ –∫—Ä–∞—Å–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –ø–æ–º–æ–≥–∞—Ç—å –∫–æ–º–∏—Å—Å–∞—Ä—É –≤ –ø–æ–∏—Å–∫–µ –º–∞—Ñ–∏–∏. –í—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–∏—Å—Å–∞—Ä–æ–º –∏ –∑–Ω–∞–µ—Ç–µ —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏–º –∏–≥—Ä–æ–∫–æ–≤. –í—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ –º–æ–∂–µ—Ç–µ, –Ω–æ –µ—Å–ª–∏ –ö–æ–º–∏—Å—Å–∞—Ä–∞ —É–±—å—é—Ç, —Ç–æ –≤—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å –ö–æ–º–∏—Å—Å–∞—Ä–æ–º.', 'https://media.discordapp.net/attachments/713714731038539796/713747667217285160/97944_original.png?width=780&height=519'],
                     '12': ['–í–∞—à–∞ —Ä–æ–ª—å - –û–±–æ—Ä–æ—Ç–µ–Ω—å.', '–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∑–∞ —á–µ—Ä–Ω—ã—Ö. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –∫—Ä–∞—Å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –≥–æ—Ä–æ–¥–µ. –ü–æ–∫–∞ –∂–∏–≤–∞ –º–∞—Ñ–∏—è, —É –≤–∞—Å –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π, –≤—ã –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤–º–µ—Å—Ç–µ —Å –º–∞—Ñ–∏–µ–π, –Ω–æ –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ. –ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–∏—Å—Å–∞—Ä–∞ –ø–æ–∫–∞–∂—É—Ç, —á—Ç–æ –≤—ã –º–∏—Ä–Ω—ã–π –∂–∏—Ç–µ–ª—å. –ö–æ–≥–¥–∞ –≤—Å–µ –º–∞—Ñ–∏–æ–∑–∏ –≤—ã–π–¥—É—Ç –∏–∑ –∏–≥—Ä—ã, —Ç–æ –≤—ã —Å–º–æ–∂–∏—Ç–µ –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –Ω–æ—á—å—é –∏ —É–±–∏–≤–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤.', 'https://media.discordapp.net/attachments/713363794138628176/713748605139419136/scary_werewolf_head_grinning.png?width=722&height=519']
                     }


#------------------Bot is online-------------------


@client.event
async def on_ready():
    print("Bot is online.")
    await client.change_presence(status=discord.Status.online)

#-----------------Utility commands------------------


@client.command()
async def unmute(ctx):
    await ctx.author.edit(mute=False)

@client.command()
async def test(ctx):
    None
#-------------------Main body-----------------------


#---------------Additional functions----------------


@client.command()
async def action(ctx, choice):
    global right_to_act, killed, mafia_vote, don_phase
    if ctx.author in right_to_act and ctx.guild == None:
        if player_status[ctx.author][5] == 1:
            await ctx.send('–í—ã —É–∂–µ —Å—Ö–æ–¥–∏–ª–∏')
            return
        try:
            choice = int(choice)
        except:
            return
        if choice > len(members) or choice - 1 < 0:
            await ctx.send('–ò–≥—Ä–æ–∫–∞ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º ' + str(choice) + ' –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –¥—Ä—É–≥–æ–≥–æ.')
            return
        elif player_status[members[choice - 1]][0] == 0:
            await ctx.send('–≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ —É–∂–µ —É–±–∏—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–≥–æ.')
            return
        else:
            choice-=1
            player_status[ctx.author][5] = 1
            if player_roles[ctx.author] == '10':
                if player_status[ctx.author][4] != choice:
                    player_status[ctx.author][4] = choice
                    player_status[members[choice]][1] = 1
                else:
                    await ctx.send('–ù–µ–ª—å–∑—è –ª–∏—à–∞—Ç—å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∏–≥—Ä–æ–∫–∞ —Ö–æ–¥–∞ –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥')
                    return
            elif player_roles[ctx.author] == '7':
                if player_status[ctx.author][4] != choice:
                    if player_roles[members[choice]] != '6':
                        player_status[ctx.author][4] = choice
                        player_status[members[choice]][1] = 2
                    else:
                        killed.append(str(members.index(ctx.author)+1))
                        player_status[members[choice]][1] = 2
                else:
                    await ctx.send('–ù–µ–ª—å–∑—è –ª–∏—à–∞—Ç—å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∏–≥—Ä–æ–∫–∞ —Ö–æ–¥–∞ –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥')
                    return
            elif player_roles[ctx.author] == '4' or (player_roles[ctx.author] == '11' and player_status[ctx.author][2] == 3):
                for member in police:
                    if int(player_roles[members[choice]]) in [1, 4, 5, 6, 7, 8, 11, 12]:
                        await member.send('–ò–≥—Ä–æ–∫ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º ' + str(choice+1) + ' –∏–≥—Ä–∞–µ—Ç –∑–∞ –∫–æ–º–∞–Ω–¥—É –º–∏—Ä–Ω—ã—Ö')
                    else:
                        await member.send('–ò–≥—Ä–æ–∫ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º ' + str(choice+1) + ' –∏–≥—Ä–∞–µ—Ç –∑–∞ –∫–æ–º–∞–Ω–¥—É –º–∞—Ñ–∏–∏')
            elif player_roles[ctx.author] == '5':
                if player_status[ctx.author][4] != choice:
                    player_status[ctx.author][4] = choice
                    if str(choice+1) in killed:
                        player_status[members[choice]][0] = 1
                        del killed[killed.index(str(choice+1))]
                else:
                    await ctx.send('–ù–µ–ª—å–∑—è –ª–µ—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥')
                    return
            elif player_roles[ctx.author] == '6':
                if player_roles[members[choice]] != '8' and player_status[members[choice]][1] != 2:
                    killed.append(str(choice+1))
            elif player_roles[ctx.author] == '12' and player_status[ctx.author][3] == 6:
                if player_roles[members[choice]] != '8' and player_status[members[choice]][1] != 2:
                    killed.append(str(choice + 1))
            elif player_roles[ctx.author] == '9' and player_status[ctx.author][3] == 6:
                if player_roles[members[choice]] != '8' and player_status[members[choice]][1] != 2:
                    killed.append(str(choice + 1))
            elif player_roles[ctx.author] == '9' and player_status[ctx.author][3] == 1:
                if members[choice] != ctx.author:
                    player_status[ctx.author][4] = choice
                else:
                    await ctx.send('–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏ —á–ª–µ–Ω–æ–≤ –º–∞—Ñ–∏–∏. –ù–µ–ª—å–∑—è –≤—ã–±–∏—Ä–∞—Ç—å —Ü–µ–ª—å—é —Å–µ–±—è —Å–∞–º–æ–≥–æ')
                    return
            elif player_roles[ctx.author] == '2':
                mafia_vote.append(str(choice+1))
            elif player_roles[ctx.author] == '3' and don_phase == 1:
                if player_roles[members[choice]] != '8' and player_status[members[choice]][1] != 2:
                    killed.append(str(choice+1))
                don_phase = 2
            elif player_roles[ctx.author] == '3' and don_phase == 2:
                if player_roles[members[choice]] == '4' or player_roles[members[choice]] == '11':
                    await ctx.send('–≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ - –∫–æ–º–∏—Å—Å–∞—Ä –∏–ª–∏ —Å–µ—Ä–∂–∞–Ω—Ç')
                else:
                    await ctx.send('–≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ –Ω–µ –∫–æ–º–∏—Å—Å–∞—Ä –∏ –Ω–µ —Å–µ—Ä–∂–∞–Ω—Ç')
            else:
                await ctx.send('–í—ã –Ω–µ —Ö–æ–¥–∏—Ç–µ –Ω–æ—á—å—é')
                return
            await ctx.send('–í—ã–±–æ—Ä —Å–¥–µ–ª–∞–Ω')


async def status_maker(i):
    player_status[i][0], player_status[i][4] = 1, -1
    if player_roles[i] == '4':
        player_status[i][2] = 3
        police.append(i)
    elif player_roles[i] == '11':
        player_status[i][2] = 2
        police.append(i)
    else:
        player_status[i][2] = 0
    if player_roles[i] == '2':
        player_status[i][3] = 4
        mafia.append(i)
    elif player_roles[i] == '3':
        player_status[i][3] = 5
        mafia.append(i)
    elif player_roles[i] == '12':
        player_status[i][3] = 3
        mafia.append(i)
    elif player_roles[i] == '9':
        player_status[i][3] = 1
        mafia.append(i)
    else:
        player_status[i][3] = 0


async def night_echo(mess):
    if player_status[mess.author][2] > 1 and player_status[mess.author][1] == 0:
        for member in police:
            if member != mess.author and player_status[member][2] > 0 and player_status[member][1] == 0:
                await member.send(str(mess.author)[:-5] + ': ' + mess.content)
    elif player_status[mess.author][3] > 2 and player_status[mess.author][1] == 0:
        for member in mafia:
            if member != mess.author and player_status[member][3] > 1 and player_status[member][1] == 0:
                await member.send(str(mess.author)[:-5] + ': ' + mess.content)


async def after_game(mess):
    sd = ''
    ft = ''
    i = 0
    for member in player_roles:
        i += 1
        x = str(roles_definition[int(player_roles[member])])
        ft += str(i) + ') ' + str(member)[:-5] + '\n'
        sd += str(i) + ') ' + x + '\n'
    emb = discord.Embed(title='–†–æ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤:', colour=discord.Color.darker_grey())
    emb.add_field(name='–ò–≥—Ä–æ–∫', value=ft, inline=True)
    emb.add_field(name='–†–æ–ª—å', value=sd, inline=True)
    await mess.channel.send(embed=emb)


async def preparation_of_results(mode):
    roles_definition[1] = '–ú–∏—Ä–Ω—ã–π_–∂–∏—Ç–µ–ª—å'
    for member in player_status:
        if mode == 1:
            if player_roles[member] == '6':
                gamers[str(member.id)] = [1, roles_multiplier[int(player_roles[member])-1], player_status[member][0], roles_definition[int(player_roles[member])]]
            else:
                gamers[str(member.id)] = [0, roles_multiplier[int(player_roles[member]) - 1], player_status[member][0], roles_definition[int(player_roles[member])]]
        elif mode == 2:
            if int(player_roles[member]) in [2, 3, 9, 10, 12]:
                gamers[str(member.id)] = [1, roles_multiplier[int(player_roles[member])-1], player_status[member][0], roles_definition[int(player_roles[member])]]
            else:
                gamers[str(member.id)] = [0, roles_multiplier[int(player_roles[member]) - 1], player_status[member][0], roles_definition[int(player_roles[member])]]
        elif mode == 3:
            if int(player_roles[member]) in [1, 4, 5, 7, 8, 11]:
                gamers[str(member.id)] = [1, roles_multiplier[int(player_roles[member]) - 1], player_status[member][0], roles_definition[int(player_roles[member])]]
            else:
                gamers[str(member.id)] = [0, roles_multiplier[int(player_roles[member]) - 1], player_status[member][0], roles_definition[int(player_roles[member])]]
        else:
            gamers[str(member.id)] = [0, roles_multiplier[int(player_roles[member]) - 1], player_status[member][0], roles_definition[int(player_roles[member])]]
    endgame(gamers)
    roles_definition[1] = '–ú–∏—Ä–Ω—ã–π –∂–∏—Ç–µ–ª—å'



async def win_condition(message):
    global red, black, two_faced, maniac
    if maniac > 0 and red + black + two_faced == 0:
        await message.channel.send('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–±–µ–¥–∞ –º–∞–Ω—å—è–∫–∞ üî™')
        await preparation_of_results(1)
        await after_game(message)
        return True
    elif maniac == 0 and ((black >= red and black > 0) or (red + black == 0 and two_faced > 0)):
        await message.channel.send('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–±–µ–¥–∞ –º–∞—Ñ–∏–∏ üïµÔ∏è')
        await preparation_of_results(2)
        await after_game(message)
        return True
    elif maniac == 0 and black == 0 and red > 0:
        await message.channel.send('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–±–µ–¥–∞ –º–∏—Ä–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ üë•')
        await preparation_of_results(3)
        await after_game(message)
        return True
    elif maniac + black + two_faced + red == 0:
        await message.channel.send('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ù–∏—á—å—è. –í –≥–æ—Ä–æ–¥–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –∂–∏–≤—ã—Ö ‚ò†')
        await preparation_of_results(4)
        await after_game(message)
        return True


async def reduction_role_condition(i):
    global red, black, two_faced, maniac
    if int(player_roles[members[i]]) in [2, 3, 10, 12]:
        black -= 1
    elif int(player_roles[members[i]]) == 6:
        maniac -= 1
    elif int(player_roles[members[i]]) == 9:
        two_faced -= 1
    else:
        red -= 1
    player_status[members[i]][0] = 0

async def add_role(num, ctx):
    def check(m):
        return m.author.id == ctx.author.id
    response = await ctx.bot.wait_for('message', check=check)
    try:
        request = response.content
        if int(request[:request.find(' ')]) not in [1, 2]:
            if roles_num[request[:request.find(' ')]]+int(request[request.find(' ')+1:]) > 1:
                await ctx.send('–¢–∞–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω')
                await add_role(num, ctx)
            else:
                roles_num[request[:request.find(' ')]]+=int(request[request.find(' ')+1:])
                if num - int(request[request.find(' ') + 1:]) > 0:
                    await add_role(num - int(request[request.find(' ') + 1:]), ctx)
        else:
            if int(request[request.find(' ')+1:]) <= num:
                roles_num[request[:request.find(' ')]]+=int(request[request.find(' ')+1:])
                if num - int(request[request.find(' ') + 1:]) > 0:
                    await add_role(num - int(request[request.find(' ') + 1:]), ctx)
            else:
                await ctx.send('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ–ª–µ–π –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.')
                await add_role(num, ctx)
    except:
        await add_role(num, ctx)

async def timer(time,mess,member,vt):
    if vt == 0:
        await mess.channel.send('–í–∞—à —Ö–æ–¥ ' + str(member)[:-5])
        global time_message
        time_message = await mess.channel.send(str(time // 60) + ':' + str((time % 60) // 10) + str((time % 60) % 10))
        await time_message.add_reaction('‚õî')
        for i in range(time - 1, -1, -1):
            if checker == 1:
                break
            time_break = tm.time()
            while True:
                if checker == 1:
                    break
                elif tm.time() - time_break > 1.0:
                    time_break = tm.time()
                    try:
                        await time_message.edit(content=str(i // 60) + ':' + str((i % 60) // 10) + str((i % 60) % 10))
                        break
                    except:
                        pass
        try:
            await time_message.delete()
        except:
            pass
    elif vt == 1 or vt == 2:
        if vt == 1:
            await mess.channel.send('–ö—Ç–æ –≥–æ–ª–æ—Å—É–µ—Ç –∑–∞ –∏–≥—Ä–æ–∫–∞  ' + str(member)[:-5]+'?')
            time_message = await mess.channel.send(str(time // 60) + ':' + str((time % 60) // 10) + str((time % 60) % 10))
            await time_message.add_reaction('‚úÖ')
        elif vt == 2:
            time_message = await mess.channel.send(str(time // 60) + ':' + str((time % 60) // 10) + str((time % 60) % 10))
            await time_message.add_reaction('‚úÖ')
            await time_message.add_reaction('‚õî')
        for i in range(time - 1, -1, -1):
            time_break = tm.time()
            while True:
                if tm.time() - time_break > 1.0:
                    time_break = tm.time()
                    try:
                        await time_message.edit(content=str(i // 60) + ':' + str((i % 60) // 10) + str((i % 60) % 10))
                        break
                    except:
                        pass
        try:
            await time_message.delete()
        except:
            pass
    elif vt == 3:
        time_message_1 = await mess.channel.send(str(time // 60) + ':' + str((time % 60) // 10) + str((time % 60) % 10))
        mafia_time = []
        for i in member:
            if player_status[i][0] != 0:
                time_message_2 = await i.send(str(time // 60) + ':' + str((time % 60) // 10) + str((time % 60) % 10))
                mafia_time.append(time_message_2)
        for i in range(time - 1, -1, -1):
            time_break = tm.time()
            while True:
                if tm.time() - time_break > 1.0:
                    time_break = tm.time()
                    try:
                        await time_message_1.edit(content=str(i // 60) + ':' + str((i % 60) // 10) + str((i % 60) % 10))
                        for j in mafia_time:
                                await j.edit(content=str(i // 60) + ':' + str((i % 60) // 10) + str((i % 60) % 10))
                        break
                    except:
                        pass
        try:
            await time_message_1.delete()
        except:
            pass
        for i in mafia_time:
            try:
                await i.delete()
            except:
                pass


@client.event
async def on_reaction_add(reaction, user):
    global count, checker, nm, gl, setgs, right_to_change
    if reaction.emoji == '‚õî' and user == right and vn == 0:
        checker = 1
    elif reaction.emoji == '‚õî' and user!=reaction.message.author and vn == 3 and user in members:
        if already[members.index(user)] == 0 and player_status[user][0] != 0:
            count -= 1
            already[members.index(user)] = 1
    elif reaction.emoji == '‚úÖ' and user!=reaction.message.author and vn == 1 and user in members:
        if already[members.index(user)] == 0 and player_status[user][0] != 0:
            votes[members.index(gl)] += 1
            already[members.index(user)] = 1
    elif reaction.emoji == '‚úÖ' and user != reaction.message.author and vn == 2 and user in members:
        if already[members.index(user)] == 0 and player_status[user][0] != 0:
            already[members.index(user)] = 1
            guilty[ind] += 1
    elif reaction.emoji == '‚úÖ' and user != reaction.message.author and vn == 3 and user in members:
        if already[members.index(user)] == 0 and player_status[user][0] != 0:
            already[members.index(user)] = 1
            count += 1
    elif reaction.emoji == 'üí§' and user != reaction.message.author and user in members:
        if already[members.index(user)] == 0 and player_status[user][0] != 0:
            already[members.index(user)] = 1
            nm-=1
            if nm == 0:
                await reaction.message.delete()
                await reaction.message.channel.send('–ù–∞—Å—Ç—É–ø–∞–µ—Ç –Ω–æ—á—å üåÉ')
    elif reaction.emoji == '‚è∞' and user != reaction.message.author and user in members:
        if already[members.index(user)] == 0 and player_status[user][0] != 0:
            already[members.index(user)] = 1
            nm-=1
            if nm == 0:
                await reaction.message.delete()
                await reaction.message.channel.send('–ù–∞—Å—Ç—É–ø–∞–µ—Ç –¥–µ–Ω—å üåá')
    elif user != reaction.message.author and vn == 4 and right_to_change == user:
        if reaction.emoji == 'ü§µ':
            setgs['mode'] = 'non-auto'
            await messages[0].edit(content=messages[0].content[:messages[0].content.find(':') + 2] + str(setgs['mode']))
            await reaction.message.remove_reaction('ü§ñ', user)
        elif reaction.emoji == 'ü§ñ':
            setgs['mode'] = 'auto'
            await messages[0].edit(content=messages[0].content[:messages[0].content.find(':') + 2] + str(setgs['mode']))
            await reaction.message.remove_reaction('ü§µ', user)
        elif reaction.emoji == 'üîä':
            setgs['mute'] = 'off'
            await messages[1].edit(content=messages[1].content[:messages[1].content.find(':') + 2] + str(setgs['mute']))
            await reaction.message.remove_reaction('üîá', user)
        elif reaction.emoji == 'üîá':
            setgs['mute'] = 'on'
            await messages[1].edit(content=messages[1].content[:messages[1].content.find(':') + 2] + str(setgs['mute']))
            await reaction.message.remove_reaction('üîä', user)
        elif reaction.emoji == '‚úÖ':
            change_settings(user.id, setgs)
            await reaction.message.channel.send('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ')
            for message in messages:
                await message.delete()
        elif reaction.emoji == '‚ùå':
            for message in messages:
                await message.delete()
        elif reaction.emoji == 'üîÑ':
            setgs = {'mode': 'auto', 'mute': 'on', 'time': [60, 45, 15, 60, 40, 90]}
            await reaction.message.remove_reaction('üîÑ', user)
            await messages[0].edit(content=messages[0].content[:messages[0].content.find(':')+2] + str(setgs['mode']))
            await messages[1].edit(content=messages[1].content[:messages[1].content.find(':') + 2] + str(setgs['mute']))
            for i in range(2, 8):
                await messages[i].edit(content=messages[i].content[:messages[i].content.find(':') + 2] + str(setgs['time'][i-2]) + ' —Å–µ–∫')
        else:
            d = reaction.message.id
            for i in range(len(messages)):
                if messages[i].id == d:
                    if reaction.emoji == '‚è©':
                        setgs['time'][i-2] += 15
                        await reaction.message.remove_reaction('‚è©', user)
                    elif reaction.emoji == '‚û°Ô∏è':
                        setgs['time'][i - 2] += 5
                        await reaction.message.remove_reaction('‚û°Ô∏è', user)
                    elif reaction.emoji == '‚¨ÖÔ∏è':
                        setgs['time'][i - 2] -= 5
                        await reaction.message.remove_reaction('‚¨ÖÔ∏è', user)
                    elif reaction.emoji == '‚è™':
                        setgs['time'][i - 2] -= 15
                        await reaction.message.remove_reaction('‚è™', user)
                    break
            await reaction.message.edit(content=reaction.message.content[:reaction.message.content.find(':')+2] + str(setgs['time'][i-2]) + ' —Å–µ–∫')


# SHORTCUTS
@client.command()
async def v(ctx, choice):
    await vote(ctx, choice)


@client.command()
async def a(ctx, choice):
    await action(ctx, choice)


@client.command()
async def s(ctx, name=None):
    await start(ctx, name)


@client.command()
async def c(ctx):
    await create(ctx)


@client.command()
async def p(ctx):
    await pool(ctx)

# SHORTCUTS

@client.command()
async def vote(ctx, choice):
    try:
        if ctx.author.id == right_to_vote.id and type(ctx.channel) != discord.channel.DMChannel:
            global vote_choice
            try:
                choice = int(choice)
            except:
                return
            global tumb
            if choice > len(members) or choice - 1 < 0:
                await ctx.send('–ò–≥—Ä–æ–∫–∞ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º ' + str(choice) + ' –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –¥—Ä—É–≥–æ–≥–æ.')
            elif choice-1 in voted and sum(votes) == 0:
                await ctx.send('–≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ —É–∂–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–≥–æ.')
            elif player_status[members[choice-1]][0] == 0:
                await ctx.send('–≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ —É–∂–µ —É–±–∏—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–≥–æ.')
            else:
                vote_choice = choice
                await ctx.send('–ü—Ä–∏–Ω—è—Ç–æ!')
    except:
        pass

#-----------------Main commands---------------------

async def meeting_day(mess):
    await mess.channel.send('–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–µ–Ω—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤ ü§ù')
    global already, time, tumb, right, checker, vn, nm
    already = [0 for i in range(len(members))]
    vn = 0
    tumb = 0
    for member in members:
        right = member
        checker = 0
        await timer(game_settings['time'][0], mess, member, 0)
    already = [0 for i in range(len(members))]
    ms = await mess.channel.send('–ì–æ—Ä–æ–¥ –∑–∞—Å—ã–ø–∞–µ—Ç üí§')
    await ms.add_reaction('üí§')
    nm = 0
    for i in list(player_status.values()):
        if i[0] != 0:
            nm += 1


async def day(mess):
    global already, time, tumb, right, checker, vn, black, red, maniac, two_faced, voted, votes, nm, right_to_vote, guilty
    await mess.channel.send('–ù–æ—á—å—é –±—ã–ª–∏ —É–±–∏—Ç—ã –∏–≥—Ä–æ–∫–∏ –ø–æ–¥ –Ω–æ–º–µ—Ä–∞–º–∏: ' + (', ').join(killed))
    vn = 0
    for person in killed:
        await reduction_role_condition(int(person)-1)
        try:
            await members[int(person)-1].edit(nick=str(person) + '. ' + str(members[int(person)-1])[:-5] + ' ‚ò†')
        except:
            pass
    if await win_condition(mess) == True:
        for member in members:
            try:
                await member.edit(nick=member.name)
            except:
                pass
        return
    await mess.channel.send('–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—É—Ä –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ üó£Ô∏è')
    voted = []
    votes = [0 for i in range(len(members))]  # –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ–ª–æ—Å–∞ –∑–∞ –∏–≥—Ä–æ–∫–æ–≤
    already = [0 for i in range(len(members))]
    guilty.clear()
    killed.clear()
    global vote_choice
    for i in list(player_roles.keys()):
        if player_status[i][0] != 0:
            checker = 0
            vote_choice = ''
            member = i
            right = member
            right_to_vote = member
            await timer(game_settings['time'][0], mess, member, 0)
            if vote_choice == '':
                pass
            elif vote_choice - 1 not in voted:
                voted.append(vote_choice - 1)
    right_to_vote = None
    if len(voted) == 0:
        await mess.channel.send('–ë—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–∏–∫–æ–≥–æ –Ω–µ —Å–∞–∂–∞—Ç—å –≤ —Ç—é—Ä—å–º—É üö´')
        already = [0 for i in range(len(members))]
        ms = await mess.channel.send('–ì–æ—Ä–æ–¥ –∑–∞—Å—ã–ø–∞–µ—Ç üí§')
        await ms.add_reaction('üí§')
        nm = 0
        for i in list(player_status.values()):
            if i[0] != 0:
                nm += 1
    else:
        m = []
        for i in range(len(voted)):
            m.append(str(voted[i] + 1))
        await mess.channel.send('–û–±–≤–∏–Ω—è—é—Ç—Å—è –∏–≥—Ä–æ–∫–∏ –ø–æ–¥ –Ω–æ–º–µ—Ä–∞–º–∏: ' + (', ').join(m))
        await mess.channel.send('–û–±–≤–∏–Ω—è–µ–º—ã–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –æ–ø—Ä–∞–≤–¥–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ—á—å üë®‚Äç‚öñÔ∏è')
        for i in voted:
            checker = 0
            member = members[i]
            right = member
            await timer(game_settings['time'][1], mess, member, 0)
        await mess.channel.send('–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ üì¢')
        tumb = 1
        right = None
        vn = 1
        for i in voted:
            member = members[i]
            global gl
            gl = member
            await timer(game_settings['time'][2], mess, member, 1)
        for i in list(player_roles.keys()):
            if player_status[i][0] != 0 and already[members.index(i)] == 0:
                votes[voted[-1]] += 1
        await mess.channel.send('–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ–∫–æ–Ω—á–µ–Ω–æ')
        if votes.count(max(votes)) == 1:
            guil = votes.index(max(votes))
            vn = 0
            right = members[guil]
            checker = 0
            await mess.channel.send('–ü—Ä–∏–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ–º—É –¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–æ –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–µ—á—å üë®‚Äç‚öñÔ∏è')
            await timer(game_settings['time'][4], mess, members[guil], 0)
            await reduction_role_condition(guil)
            try:
                await members[guil].edit(nick=str(guil + 1) + '. ' + str(members[guil])[:-5] + ' ‚ò†')
            except:
                pass
            await mess.channel.send(str(members[guil])[:-5] + ' –±—ã–ª –ø–æ—Å–∞–∂–µ–Ω –∑–∞ —Ä–µ—à–µ—Ç–∫—É üëÆ')
            if await win_condition(mess) == True:
                for member in members:
                    try:
                        await member.edit(nick=member.name)
                    except:
                        pass
                return
        else:
            for i in range(len(voted)):
                if votes[voted[i]] == max(votes):
                    guilty[voted[i] + 1] = 0
            await mess.channel.send(
                '–û–±–≤–∏–Ω—è–µ–º—ã–º ' + str(guilty.keys())[11:-2] + ' –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ä–∞–≤–¥–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—á–∏ üë®‚Äç‚öñÔ∏è')
            guilty.clear()
            right = None
            vn = 0
            for i in range(len(voted)):
                if votes[voted[i]] == max(votes):
                    checker = 0
                    guilty[voted[i]] = 0
                    member = members[voted[i]]
                    right = member
                    await timer(game_settings['time'][0], mess, member, 0)
            await mess.channel.send('–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ üì¢')
            right = None
            already = [0 for i in range(len(members))]
            for i in range(len(guilty)):
                vn = 2
                member = members[list(guilty.keys())[i]]
                global ind
                ind = list(guilty.keys())[i]
                await timer(game_settings['time'][2], mess, member, 1)
            for i in list(player_roles.keys()):
                if player_status[i][0] != 0 and already[members.index(i)] == 0:
                    guilty[list(guilty.keys())[-1]] += 1
            if list(guilty.values()).count(max(guilty.values())) == 1:
                vn = 0
                for i in list(guilty.keys()):
                    if guilty[i] == max(guilty.values()):
                        checker = 0
                        right = members[list(guilty.keys())[i]]
                        await mess.channel.send('–ü—Ä–∏–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ–º—É –¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–æ –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–µ—á—å üë®‚Äç‚öñÔ∏è')
                        await timer(game_settings['time'][3], mess, members[list(guilty.keys())[i]], 0)

                        try:
                            await members[i].edit(nick=str(i + 1) + '. ' + str(members[i])[:-5] + ' ‚ò†')
                        except:
                            pass
                            await mess.channel.send(str(members[i])[:-5] + ' –±—ã–ª –ø–æ—Å–∞–∂–µ–Ω –∑–∞ —Ä–µ—à–µ—Ç–∫—É üëÆ')
                        break
                if await win_condition(mess) == True:
                    for member in members:
                        try:
                            await member.edit(nick=member.name)
                        except:
                            pass
                    return
            else:
                for i in list(guilty.keys()):
                    if guilty[i] != max(guilty.values()):
                        del guilty[i]
                await mess.channel.send(
                    '–ü–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Å—Ç–∞–ª–∏—Å—å –∏–≥—Ä–æ–∫–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ: –≤—ã–≥–Ω–∞—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ—Ö\n‚úÖ - –≤—ã–≥–Ω–∞—Ç—å, ‚õî - –æ—Å—Ç–∞–≤–∏—Ç—å')
                global count
                count = 0
                vn = 3
                right = None
                already = [0 for i in range(len(members))]
                checker = 0
                await timer(game_settings['time'][2], mess, member, 2)
                for i in list(player_roles.keys()):
                    if player_status[i][0] != 0 and already[members.index(i)] == 0:
                        count -= 1
                if count > 0:
                    await mess.channel.send('–ü—Ä–∏–≥–æ–≤–æ—Ä–µ–Ω–Ω—ã–º –¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–æ –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–µ—á—å üë®‚Äç‚öñÔ∏è')
                    vn = 0
                    for i in list(guilty.keys()):
                        checker = 0
                        right = members[list(guilty.keys())[i]]
                        await timer(game_settings['time'][2], mess, members[list(guilty.keys())[i]], 0)
                        await reduction_role_condition(i)
                        try:
                            await members[i].edit(nick=str(i + 1) + '. ' + str(members[i])[:-5] + ' ‚ò†')
                        except:
                            pass
                        await mess.channel.send(str(members[i])[:-5] + ' –±—ã–ª –ø–æ—Å–∞–∂–µ–Ω –∑–∞ —Ä–µ—à–µ—Ç–∫—É üëÆ')
                    if await win_condition(mess) == True:
                        for member in members:
                            try:
                                await member.edit(nick=member.name)
                            except:
                                pass
                        return
                else:
                    await mess.channel.send('–ë—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–∏–∫–æ–≥–æ –Ω–µ —Å–∞–∂–∞—Ç—å –≤ —Ç—é—Ä—å–º—É üö´')
        already = [0 for i in range(len(members))]
        ms = await mess.channel.send('–ì–æ—Ä–æ–¥ –∑–∞—Å—ã–ø–∞–µ—Ç üí§')
        await ms.add_reaction('üí§')
        nm = 0
        for i in list(player_status.values()):
            if i[0] != 0:
                nm += 1


async def night(mess):
    global vn, nm, already, right_to_act, killed, don_phase, right_to_chat, mafia_vote, two_faced, black
    vn = 4
    for member in player_roles:
        if player_status[member][2] > 1 and player_status[member][0] == 0:
            player_status[member][2] = 1
        elif player_status[member][3] > 2 and player_status[member][0] == 0:
            player_status[member][3] = 2
        player_status[member][1] = 0
        player_status[member][5] = 0
        if player_roles[member] == '9':
            if player_status[member][4] != -1 and members[player_status[member][4]] in mafia:
                player_status[member][3] = 6
                two_faced-=1
                black+=1
        elif player_roles[member] == '11':
            for j in player_roles:
                if player_roles[j] == '4' and player_status[j][0] == 0:
                    player_status[member][2] = 3
        elif player_roles[member] == '12':
            count = 0
            for j in player_roles:
                if int(player_roles[j]) in [2, 3] and player_status[j][0] == 1:
                    count += 1
                    count += 1
            if count == 0:
                player_status[member][3] = 6
            del count
    for i in range(len(sequence)):
        if type(sequence[i]) == int:
            for j in list(player_roles.keys()):
                if int(player_roles[j]) == sequence[i]:
                    if player_status[j][0] != 0 and player_status[j][1] == 0:
                        right_to_act = [j]
                        await j.send('‚ö†Ô∏è –í–ê–® –•–û–î ‚ö†Ô∏è')
                    elif player_status[j][1] in [1, 2]:
                        await j.send('–í–∞—Å –ª–∏—à–∏–ª–∏ —Ö–æ–¥–∞!')
                    await mess.channel.send('–•–æ–¥ ' + sequence_guild_message[i])
                    if i != 3:
                        await timer(game_settings['time'][4], mess, [j], 3)
                    elif i == 3:
                        right_to_chat = mafia.copy()
                        await timer(game_settings['time'][4], mess, [j], 3)
                        if don_phase == 1 and player_status[j][0] != 0 and player_status[j][1] == 0 and vote_results.count(max(vote_results)) == 1 and sum(vote_results) != 0:
                            killed.append(str(vote_results.index(max(vote_results))+1))
                    right_to_act.clear()
                    right_to_chat.clear()
        elif type(sequence[i]) == list and i == 4:
            right_to_chat = police.copy()
            for j in list(player_roles.keys()):
                if int(player_roles[j]) == 4 and player_status[j][0] != 0:
                    if player_status[j][1] == 0:
                        right_to_act = [j]
                        await j.send('‚ö†Ô∏è –í–ê–® –•–û–î ‚ö†Ô∏è')
                    elif player_status[j][1] in [1, 2]:
                        await j.send('–í–∞—Å –ª–∏—à–∏–ª–∏ —Ö–æ–¥–∞!')
                    await mess.channel.send('–•–æ–¥ ' + sequence_guild_message[i])
                    await timer(game_settings['time'][4], mess, [j], 3)
                    right_to_act.clear()
                    break
                elif int(player_roles[j]) == 11 and player_status[j][0] != 0:
                    if player_status[j][1] == 0:
                        right_to_act = [j]
                        await j.send('‚ö†Ô∏è –í–ê–® –•–û–î ‚ö†Ô∏è')
                    elif player_status[j][1] in [1, 2]:
                        await j.send('–í–∞—Å –ª–∏—à–∏–ª–∏ —Ö–æ–¥–∞!')
                    await mess.channel.send('–•–æ–¥ ' + sequence_guild_message[i])
                    await timer(game_settings['time'][4], mess, [j], 3)
                    right_to_act.clear()
                    break
            right_to_chat.clear()
        elif type(sequence[i]) == list and i == 2:
            right_to_chat = mafia.copy()
            right_to_act = []
            mafia_vote = []
            for j in list(player_roles.keys()):
                if int(player_roles[j]) == 9 and player_status[j][0] != 0:
                    if player_status[j][1] == 0:
                        right_to_act.append(j)
                        await j.send('‚ö†Ô∏è –í–ê–® –•–û–î ‚ö†Ô∏è')
                    elif player_status[j][1] in [1, 2]:
                        await j.send('–í–∞—Å –ª–∏—à–∏–ª–∏ —Ö–æ–¥–∞!')
                elif int(player_roles[j]) == 12 and player_status[j][0] != 0:
                    count=0
                    for member in list(player_roles.keys()):
                        if int(player_roles[member]) in [2, 3] and player_status[member][0] != 0:
                            count+=1
                    if player_status[j][1] == 0 and count == 0:
                        del count
                        right_to_act.append(j)
                        await j.send('‚ö†Ô∏è –í–ê–® –•–û–î ‚ö†Ô∏è')
                    elif player_status[j][1] in [1, 2]:
                        await j.send('–í–∞—Å –ª–∏—à–∏–ª–∏ —Ö–æ–¥–∞!')
                elif int(player_roles[j]) == 2 and player_status[j][0] != 0:
                    if player_status[j][1] == 0:
                        right_to_act.append(j)
                        await j.send('‚ö†Ô∏è –í–ê–® –•–û–î ‚ö†Ô∏è')
                    elif player_status[j][1] in [1, 2]:
                        await j.send('–í–∞—Å –ª–∏—à–∏–ª–∏ —Ö–æ–¥–∞!')
            await mess.channel.send('–•–æ–¥ ' + sequence_guild_message[i])
            await timer(game_settings['time'][5], mess, right_to_act, 3)
            right_to_act.clear()
            vote_results = []
            for j in range(1, len(members)+1):
                vote_results.append(mafia_vote.count(str(j)))
            for j in list(player_roles.keys()):
                if player_roles[j] == '3' and player_status[j][0] != 0 and player_status[j][1] == 0:
                    right_to_act = [j]
                    if sum(vote_results) != 0:
                        for l in range(len(vote_results)):
                            if vote_results[l] != 0:
                                await j.send(str(vote_results[l]) + ' –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª(-–æ) –∑–∞ —É–±–∏–π—Å—Ç–≤–æ ' + str(l+1))
                    else:
                        await j.send('–ú–∞—Ñ–∏—è –Ω–µ –≤—ã–±—Ä–∞–ª–∞ –Ω–∏ –æ–¥–Ω–æ–π —Ü–µ–ª–∏ –¥–ª—è —É–±–∏–π—Å—Ç–≤–∞')
                elif player_roles[j] == '3' and (player_status[j][0] == 0 or player_status[j][1] != 0) or list(player_roles.values()).count('3') == 0:
                    if sum(vote_results) != 0:
                        k = vote_results.index(max(vote_results))
                        if vote_results.count(max(vote_results)) == 1 and player_roles[members[k]] != '8' and player_status[members[k]][1] != 2:
                            killed.append(str(k+1))
            don_phase = 1
        killed = list(set(killed))
        killed.sort()

    for i in killed:
        try:
            player_status[members[int(i)-1]][0] = 0
        except:
            pass
    already = [0 for i in range(len(members))]
    ms = await mess.channel.send('–ì–æ—Ä–æ–¥ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è ‚è∞')
    await ms.add_reaction('‚è∞')
    right_to_act.clear()
    nm = 0
    for i in list(player_status.values()):
        if i[0] != 0:
            nm += 1
    if nm == 0:
        await ms.delete()
        await mess.channel.send('–ù–∞—Å—Ç—É–ø–∞–µ—Ç –¥–µ–Ω—å üåá')


async def genc(ctx):
    global roles_num
    global members
    global roles_num_b
    if type(ctx.channel) != discord.channel.DMChannel:
        roles_num = roles_num_b.copy()
        members = ctx.message.author.voice.channel.members
        amount = len(members)
        #amount = 5
        if amount > 3 and amount < 11:
                roles_num['2'], roles_num['3'], roles_num['4'] = amount//3 - 1, 1, 1
                roles_num['1'] = amount - sum(list(roles_num.values()))
                await ctx.send("–ù–∞—á–∞–ª–æ –∏–≥—Ä—ã. –†–æ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∏–≥—Ä–µ:" + "\n\n" + "–ú–∏—Ä–Ω—ã—Ö –∂–∏—Ç–µ–ª–µ–π: " + str(
                roles_num['1']) + "\n" + "–ú–∞—Ñ–∏–π: " + str(roles_num['2']) + "\n" + "–î–æ–Ω–æ–≤ –º–∞—Ñ–∏–∏: " + str(
                roles_num['3']) + "\n" + "–ö–æ–º–∏—Å—Å–∞—Ä–æ–≤: " + str(roles_num['4']))
        else:
            await ctx.send('–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –¥–ª—è –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ –æ—Ç 3 –¥–æ 10 –∏–≥—Ä–æ–∫–æ–≤')


async def gene(ctx):
    global roles_num
    global members
    global roles_num_b
    if type(ctx.channel) != discord.channel.DMChannel:
        roles_num = roles_num_b.copy()
        members = ctx.message.author.voice.channel.members
        amount = len(members)


@client.command()
async def settings(ctx):
    global vn, setgs, messages, right_to_change
    vn = 4
    right_to_change = ctx.author
    setgs = get_settings(ctx.author.id)
    messages = []
    messages.append(await ctx.send('–†–µ–∂–∏–º: ' + str(setgs['mode'])))
    await messages[0].add_reaction('ü§µ')
    await messages[0].add_reaction('ü§ñ')
    messages.append(await ctx.send('–ú—É—Ç: ' + str(setgs['mute'])))
    await messages[1].add_reaction('üîä')
    await messages[1].add_reaction('üîá')
    messages.append(await ctx.send('–î–Ω–µ–≤–Ω–∞—è —Ä–µ—á—å: ' + str(setgs['time'][0]) + ' —Å–µ–∫'))
    messages.append(await ctx.send('–û–ø—Ä–∞–≤–¥–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ—á—å: ' + str(setgs['time'][1]) + ' —Å–µ–∫'))
    messages.append(await ctx.send('–í—Ä–µ–º—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è: ' + str(setgs['time'][2]) + ' —Å–µ–∫'))
    messages.append(await ctx.send('–†–µ—á—å –ø—Ä–∏–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ–≥–æ: ' + str(setgs['time'][3]) + ' —Å–µ–∫'))
    messages.append(await ctx.send('–ù–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ–¥–∏–Ω–æ—á–Ω–æ–π —Ä–æ–ª–∏: ' + str(setgs['time'][4]) + ' —Å–µ–∫'))
    messages.append(await ctx.send('–ù–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –º–∞—Ñ–∏–∏: ' + str(setgs['time'][5]) + ' —Å–µ–∫'))
    for i in range(2, 8):
        await messages[i].add_reaction('‚è™')
        await messages[i].add_reaction('‚¨ÖÔ∏è')
        await messages[i].add_reaction('‚û°Ô∏è')
        await messages[i].add_reaction('‚è©')
    messages.append(await ctx.send('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å?'))
    await messages[-1].add_reaction('‚úÖ')
    await messages[-1].add_reaction('‚ùå')
    await messages[-1].add_reaction('üîÑ')



@client.command()
async def create(ctx):
    global roles_num
    global members
    global roles_num_b
    global game_settings
    game_settings = get_settings(ctx.author.id)
    if game_settings['mode'] == "non-auto" and type(ctx.channel) != discord.channel.DMChannel:
        await ctx.send("–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, –≤—Å–µ –ª–∏ –∂–µ–ª–∞—é—â–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –í–∞—à–µ–º—É –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—É, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ –≤—Å–µ —Ä–æ–ª–∏ —Å–º–æ–≥—É—Ç –≤—ã–¥–∞—Ç—å—Å—è.\n–ï—Å–ª–∏ –≤—Å—ë –≥–æ—Ç–æ–≤–æ, –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏.")
        roles_num = roles_num_b.copy()

        def check(m):
            return m.author.id == ctx.author.id

        members = ctx.message.author.voice.channel.members
        for member in members:
            if member.bot:
                members.remove(member)
        await ctx.send("–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ–¥—É—â–µ–≥–æ.")
        response = await ctx.bot.wait_for('message', check=check)
        for member in members:
            if member.mentioned_in(response):
                emb = discord.Embed(title="–í–∞—Å –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –≤–µ–¥—É—â–∏–º –∏–≥—Ä—ã.", colour=discord.Color.darker_grey())
                emb.set_image(url="https://media.discordapp.net/attachments/713363794138628176/713750207623331880/AATXAJxHckd0XbeQRXnekTtsXFQ0vgyIRvtCrntQeQs900-c-k-c0xffffffff-no-rj-mo.png?width=519&height=519")
                await member.send(embed=emb)
                game_master = member
                members.remove(game_master)
                break
        await ctx.send("–ó–∞–¥–∞–π—Ç–µ —Ä–æ–ª–∏.")
        await ctx.send("1. –ú–∏—Ä–Ω—ã–π –∂–∏—Ç–µ–ª—å " + "\n" + "2. –ú–∞—Ñ–∏—è " + "\n" + "3. –î–æ–Ω –º–∞—Ñ–∏–∏ " + "\n" + "4. –ö–æ–º–∏—Å—Å–∞—Ä " + "\n" + "5. –î–æ–∫—Ç–æ—Ä " + "\n" + "6. –ú–∞–Ω—å—è–∫ " + "\n" + "7. –ö—É—Ä—Ç–∏–∑–∞–Ω–∫–∞ " + "\n" + "8. –ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π " + "\n" + "9. –î–≤—É–ª–∏–∫–∏–π " + "\n" + "10. –í–æ—Ä " + "\n" + "11. –°–µ—Ä–∂–∞–Ω—Ç " + "\n" + "12. –û–±–æ—Ä–æ—Ç–µ–Ω—å")
        await add_role(len(members), ctx)
        await ctx.send("–ù–∞—á–∞–ª–æ –∏–≥—Ä—ã. –†–æ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∏–≥—Ä–µ:" + "\n\n" + "–ú–∏—Ä–Ω—ã—Ö –∂–∏—Ç–µ–ª–µ–π: " + str(roles_num['1']) + "\n" + "–ú–∞—Ñ–∏–π: " + str(roles_num['2']) + "\n" + "–î–æ–Ω–æ–≤ –º–∞—Ñ–∏–∏: " + str(roles_num['3']) + "\n" + "–ö–æ–º–∏—Å—Å–∞—Ä–æ–≤: " + str(roles_num['4']) + "\n" + "–î–æ–∫—Ç–æ—Ä–æ–≤: " + str(roles_num['5']) + "\n" + "–ú–∞–Ω—å—è–∫–æ–≤: " + str(roles_num['6']) + "\n" + "–ö—É—Ä—Ç–∏–∑–∞–Ω–æ–∫: " + str(roles_num['7']) + "\n" + "–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã—Ö: " + str(roles_num['8']) + "\n" + "–î–≤—É–ª–∏–∫–∏—Ö: " + str(roles_num['9']) + "\n" + "–í–æ—Ä–æ–≤: " + str(roles_num['10']) + "\n" + "–°–µ—Ä–∂–∞–Ω—Ç–æ–≤: " + str(roles_num['11']) + "\n" + "–û–±–æ—Ä–æ—Ç–Ω–µ–π: " + str(roles_num['12']))
    elif game_settings['mode'] == 'auto' and type(ctx.channel) != discord.channel.DMChannel:
        await ctx.send(
            "–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, –≤—Å–µ –ª–∏ –∂–µ–ª–∞—é—â–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –í–∞—à–µ–º—É –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—É, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ –≤—Å–µ —Ä–æ–ª–∏ —Å–º–æ–≥—É—Ç –≤—ã–¥–∞—Ç—å—Å—è.\n–ï—Å–ª–∏ –≤—Å—ë –≥–æ—Ç–æ–≤–æ, –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏.")
        roles_num = roles_num_b.copy()
        members = ctx.message.author.voice.channel.members
        for member in members:
            if member.bot:
                members.remove(member)
        await ctx.send("–ó–∞–¥–∞–π—Ç–µ —Ä–æ–ª–∏.")
        await ctx.send(
            "1. –ú–∏—Ä–Ω—ã–π –∂–∏—Ç–µ–ª—å " + "\n" + "2. –ú–∞—Ñ–∏—è " + "\n" + "3. –î–æ–Ω –º–∞—Ñ–∏–∏ " + "\n" + "4. –ö–æ–º–∏—Å—Å–∞—Ä " + "\n" + "5. –î–æ–∫—Ç–æ—Ä " + "\n" + "6. –ú–∞–Ω—å—è–∫ " + "\n" + "7. –ö—É—Ä—Ç–∏–∑–∞–Ω–∫–∞ " + "\n" + "8. –ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π " + "\n" + "9. –î–≤—É–ª–∏–∫–∏–π " + "\n" + "10. –í–æ—Ä " + "\n" + "11. –°–µ—Ä–∂–∞–Ω—Ç " + "\n" + "12. –û–±–æ—Ä–æ—Ç–µ–Ω—å")
        await add_role(len(members), ctx)
        await ctx.send("–ù–∞—á–∞–ª–æ –∏–≥—Ä—ã. –†–æ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∏–≥—Ä–µ:" + "\n\n" + "–ú–∏—Ä–Ω—ã—Ö –∂–∏—Ç–µ–ª–µ–π: " + str(
            roles_num['1']) + "\n" + "–ú–∞—Ñ–∏–π: " + str(roles_num['2']) + "\n" + "–î–æ–Ω–æ–≤ –º–∞—Ñ–∏–∏: " + str(
            roles_num['3']) + "\n" + "–ö–æ–º–∏—Å—Å–∞—Ä–æ–≤: " + str(roles_num['4']) + "\n" + "–î–æ–∫—Ç–æ—Ä–æ–≤: " + str(
            roles_num['5']) + "\n" + "–ú–∞–Ω—å—è–∫–æ–≤: " + str(roles_num['6']) + "\n" + "–ö—É—Ä—Ç–∏–∑–∞–Ω–æ–∫: " + str(
            roles_num['7']) + "\n" + "–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã—Ö: " + str(
            roles_num['8']) + "\n" + "–î–≤—É–ª–∏–∫–∏—Ö: " + str(roles_num['9']) + "\n" + "–í–æ—Ä–æ–≤: " + str(
            roles_num['10']) + "\n" + "–°–µ—Ä–∂–∞–Ω—Ç–æ–≤: " + str(roles_num['11']) + "\n" + "–û–±–æ—Ä–æ—Ç–Ω–µ–π: " + str(
            roles_num['12']))


@client.command()
async def pool(ctx):
    if type(ctx.channel) != discord.channel.DMChannel:
        await ctx.send("1. –ú–∏—Ä–Ω—ã—Ö –∂–∏—Ç–µ–ª–µ–π: " + str(roles_num['1']) + "\n" + "2. –ú–∞—Ñ–∏–π: " + str(roles_num['2']) + "\n" + "3. –î–æ–Ω–æ–≤ –º–∞—Ñ–∏–∏: " + str(roles_num['3']) + "\n" + "4. –ö–æ–º–∏—Å—Å–∞—Ä–æ–≤: " + str(roles_num['4']) + "\n" + "5. –î–æ–∫—Ç–æ—Ä–æ–≤: " + str(roles_num['5']) + "\n" + "6. –ú–∞–Ω—å—è–∫–æ–≤: " + str(roles_num['6']) + "\n" + "7. –ö—É—Ä—Ç–∏–∑–∞–Ω–æ–∫: " + str(roles_num['7']) + "\n" + "8. –ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã—Ö: " + str(roles_num['8']) + "\n" + "9. –î–≤—É–ª–∏–∫–∏—Ö: " + str(roles_num['9']) + "\n" + "10. –í–æ—Ä–æ–≤: " + str(roles_num['10']) + "\n" + "11. –°–µ—Ä–∂–∞–Ω—Ç–æ–≤: " + str(roles_num['11']) + "\n" + "12. –û–±–æ—Ä–æ—Ç–Ω–µ–π: " + str(roles_num['12']) + "\n\n" + "–û—Å—Ç–∞–≤—à–∏—Ö—Å—è –º–µ—Å—Ç: " + str(len(members) - int(roles_num['1']) - int(roles_num['2']) - int(roles_num['3']) - int(roles_num['4']) - int(roles_num['5']) - int(roles_num['6']) - int(roles_num['7']) - int(roles_num['8']) - int(roles_num['9']) - int(roles_num['10']) - int(roles_num['11']) - int(roles_num['12'])))


@client.command()
async def save(ctx, name):
    if roles_num != {}:
        await ctx.send('–°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º {}'.format(name))
        save_set(ctx.author.id, name, roles_num)
    else:
        await ctx.send('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã')


@client.command()
async def start(ctx, name=None):
    global roles_num
    global members
    global game_settings
    game_settings = get_settings(ctx.author.id)
    if name != None and name != 'cl' and name != 'ex':
        new_set = load_set(ctx.author.id, name)
        members = ctx.message.author.voice.channel.members
        if new_set == {}:
            await ctx.send('–¢–∞–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ä–æ–ª–µ–π –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç')
            return
        else:
            roles_num = new_set
            del new_set
    elif name == 'cl':
        await genc(ctx)
    elif name == 'ex':
        await gene(ctx)
    if type(ctx.channel) != discord.channel.DMChannel:
        for role in roles_num.copy():
            if roles_num[role] == 0:
                if role in roles_num:
                    del roles_num[role]
        if roles_num == {}:
            await ctx.send("–í—ã –Ω–µ –∑–∞–¥–∞–ª–∏ —Ä–æ–ª–∏")
            return
        elif sum(list(roles_num.values())) != len(members):
            await ctx.send('–î–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤')
            return
        else:
            roles_num_list = []
            while roles_num != {}:
                for role in roles_num.copy():
                    if role in roles_num:
                        for i in range(0, roles_num[role]):
                            roles_num_list.append(role)
                        del roles_num[role]
            counter = 1
            for member in members:
                counter += 1
                random.seed(random.randint(0, 100))
                index_of_giving_role = random.randint(0, len(roles_num_list) - 1)
                giving_role = roles_num_list[index_of_giving_role]
                roles_num_list.pop(index_of_giving_role)
                global player_roles
                player_roles[member] = giving_role
                emb = discord.Embed(title=roles_description[giving_role][0], colour=discord.Color.darker_grey())
                emb.add_field(name="–û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏:", value=roles_description[giving_role][1])
                emb.set_image(url=roles_description[giving_role][2])
                await member.send(embed=emb)
        if game_settings['mode'] == 'non-auto':
            pass
        else:
            try:
                for i in range(len(members)):
                    try:
                        await members[i].edit(nick=(str(i+1)+'. '+str(members[i])[:-5]))
                    except:
                        pass
                global black, red, two_faced, maniac, player_status
                black, red, two_faced, maniac = 0, 0, 0, 0
                for i in list(player_roles.values()):
                    if int(i) in [2, 3, 10, 12]:
                        black += 1
                    elif int(i) == 6:
                        maniac += 1
                    elif int(i) == 9:
                        two_faced += 1
                    else:
                        red += 1
                player_status = {members[x]: [0 for i in range(6)] for x in range(len(members))}
                for i in list(player_roles.keys()):
                    await status_maker(i)
                await ctx.send('üí† –ò–ì–†–ê –ù–ê–ß–ê–õ–ê–°–¨ üí†')
            except:
                await ctx.send('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ –∑–∞–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã.')


@client.event
async def on_message(mess):
    if mess.author == client.user and mess.guild != None:
        if mess.content == 'üí† –ò–ì–†–ê –ù–ê–ß–ê–õ–ê–°–¨ üí†':
            await meeting_day(mess)
        if mess.content == '–ù–∞—Å—Ç—É–ø–∞–µ—Ç –¥–µ–Ω—å üåá':
            await day(mess)
        if mess.content == '–ù–∞—Å—Ç—É–ø–∞–µ—Ç –Ω–æ—á—å üåÉ':
            await night(mess)
    elif mess.guild == None and mess.author != client.user:
        global right_to_chat
        if mess.author in members and mess.content[0] != '!' and mess.author in right_to_chat:
            await night_echo(mess)
    await client.process_commands(mess)

#---------------------Token-------------------------

token = 'NzEzMzczNTg4ODYxODc4MzQz.XsfK7Q.IigCNgypVztyU5cOg_Bg2tgOYsI'
client.run(token)
